<!doctype html><html><head><meta charset="utf-8"><title>Alarmmonitor</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<style>body{background:#111;color:#eee;font-family:sans-serif}#alarm{display:none;padding:2rem}h1{font-size:3rem}</style>
</head><body>
<div id="idle">Bereit Â· <span id="clock"></span></div>
<div id="alarm"><h1 id="kw"></h1><div id="addr"></div><audio id="gong" src="/static/../assets/sounds/gong1.mp3"></audio></div>
<script>
const ws = new WebSocket((location.protocol==='https:'?'wss':'ws')+'://'+location.host+'/ws/monitor');
ws.onmessage = (ev)=>{
  const msg = JSON.parse(ev.data);
  if(msg.type==='monitor.alarm'){
    document.getElementById('idle').style.display='none';
    document.getElementById('alarm').style.display='block';
    document.getElementById('kw').textContent = (msg.incident.keyword||'Alarm');
    const a=msg.incident.address||{};
    document.getElementById('addr').textContent = (a.street||'')+ ' '+(a.city||'');
    const gong=document.getElementById('gong');
    gong.currentTime=0; gong.play().catch(()=>{});
  }
};
setInterval(()=>{document.getElementById('clock').textContent=new Date().toLocaleTimeString()},1000);
</script></body></html>
